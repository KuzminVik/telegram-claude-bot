# ü§ñ Telegram –±–æ—Ç —Å Claude AI + Weather + News + Mobile + RAG

Telegram –±–æ—Ç —Å Claude AI, –ø–æ–≥–æ–¥–æ–π, –Ω–æ–≤–æ—Å—Ç—è–º–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º Android —ç–º—É–ª—è—Ç–æ—Ä–æ–º –∏ RAG –ø–æ–∏—Å–∫–æ–º —Å –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–∞ —á–µ—Ä–µ–∑ MCP —Å–µ—Ä–≤–µ—Ä—ã.

[![Python](https://img.shields.io/badge/Python-3.12-blue.svg)](https://www.python.org/)
[![Telegram Bot API](https://img.shields.io/badge/Telegram%20Bot%20API-21.0-blue.svg)](https://python-telegram-bot.org/)
[![Claude AI](https://img.shields.io/badge/Claude-Sonnet%204-purple.svg)](https://www.anthropic.com/)
[![Node.js](https://img.shields.io/badge/Node.js-20.x-green.svg)](https://nodejs.org/)
[![Ollama](https://img.shields.io/badge/Ollama-nomic--embed--text-orange.svg)](https://ollama.ai/)

---

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üí¨ –†–∞–∑–≥–æ–≤–æ—Ä —Å Claude AI
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ (–¥–æ 30 —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ Claude
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSON
- –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤

### üå§Ô∏è –ü–æ–≥–æ–¥–∞ (—á–µ—Ä–µ–∑ MCP Weather Server)
- **–¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞** –¥–ª—è –ª—é–±–æ–≥–æ –≥–æ—Ä–æ–¥–∞
- **–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –¥–µ–Ω—å:** –º–∞–∫—Å/–º–∏–Ω —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –æ—Å–∞–¥–∫–∏, –≤–æ—Å—Ö–æ–¥/–∑–∞–∫–∞—Ç
- **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤—á–µ—Ä–∞:** Claude –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **–£—Ç—Ä–µ–Ω–Ω—è—è —Ä–∞—Å—Å—ã–ª–∫–∞** –≤ 08:00 MSK —Å –¥–∞–π–¥–∂–µ—Å—Ç–æ–º

### üì∞ –ù–æ–≤–æ—Å—Ç–∏ (—á–µ—Ä–µ–∑ MCP News Server)
- **RSS –Ω–æ–≤–æ—Å—Ç–∏** –∏–∑ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:** –æ–±—â–∏–µ, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –±–∏–∑–Ω–µ—Å
- **–¢–æ–ø –Ω–æ–≤–æ—Å—Ç–∏** –≤ —É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–∞—Å—Å—ã–ª–∫–µ
- **–ö–æ–º–∞–Ω–¥–∞ /morning_digest** - –ø–æ–≥–æ–¥–∞ + –Ω–æ–≤–æ—Å—Ç–∏

### üì± Android –≠–º—É–ª—è—Ç–æ—Ä (—á–µ—Ä–µ–∑ MCP Mobile Server)
- **–°–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤** - –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–º—É–ª—è—Ç–æ—Ä–æ–≤
- **–ó–∞–ø—É—Å–∫ —ç–º—É–ª—è—Ç–æ—Ä–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ä—Ç
- **–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∞** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–±–æ—Ç–µ
- **–£–¥–∞–ª—ë–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - —á–µ—Ä–µ–∑ SSH tunnel —Å Mac

### üîç RAG –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (—á–µ—Ä–µ–∑ MCP Ollama Server)
- **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –±–æ—Ç–∞
- **768-–º–µ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏** —á–µ—Ä–µ–∑ nomic-embed-text
- **Cosine similarity** –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è
- **Smart filtering** —Å –ø–æ—Ä–æ–≥–∞–º–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

### ü§ñ RAG –†–µ–∂–∏–º —Å –ò—Å—Ç–æ—Ä–∏–µ–π ‚≠ê **–ù–û–í–û–ï v9.1!**
- **–ö–æ–º–∞–Ω–¥–∞ /with_rag** - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π RAG —Ä–µ–∂–∏–º
- **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞** - —Ö—Ä–∞–Ω–∏—Ç 20 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** —Å similarity scores
- **Light —Ñ–∏–ª—å—Ç—Ä:** similarity ‚â• 0.3, –¥–æ 5 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–ú–µ—Ç—Ä–∏–∫–∏:** –≤—Ä–µ–º—è, –º–æ–¥–µ–ª—å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
  - `/clear_rag` - –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é RAG
  - `/rag_history` - –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é

---

## üì± –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- `/clear` - –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
- `/stats` - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- `/debug` - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### RAG –†–µ–∂–∏–º: ‚≠ê **–ù–û–í–û–ï!**
- `/with_rag <–≤–æ–ø—Ä–æ—Å>` - –û—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ RAG —Å –∏—Å—Ç–æ—Ä–∏–µ–π
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ (20 —Å–æ–æ–±—â–µ–Ω–∏–π)
  - –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å similarity
- `/clear_rag` - –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é RAG –¥–∏–∞–ª–æ–≥–∞
- `/rag_history` - –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é RAG –¥–∏–∞–ª–æ–≥–∞

### –ü–æ–≥–æ–¥–∞:
- `/weather_subscribe –ì–æ—Ä–æ–¥` - –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É—Ç—Ä–µ–Ω–Ω—é—é –ø–æ–≥–æ–¥—É
- `/weather_unsubscribe` - –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –ø–æ–≥–æ–¥—ã
- `/weather_list` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–¥–ø–∏—Å–∫—É

### –ù–æ–≤–æ—Å—Ç–∏:
- `/morning_digest` - –ü–æ–ª—É—á–∏—Ç—å –¥–∞–π–¥–∂–µ—Å—Ç (–ø–æ–≥–æ–¥–∞ + –Ω–æ–≤–æ—Å—Ç–∏)

### –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
- `/mobile_devices` - –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `/start_emulator` - –ó–∞–ø—É—Å—Ç–∏—Ç—å Android —ç–º—É–ª—è—Ç–æ—Ä

---

## üìä –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAG —Ä–µ–∂–∏–º–∞

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `/with_rag –ö–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –µ—Å—Ç—å —É –±–æ—Ç–∞?`

**–ë–æ—Ç:**
```
ü§ñ RAG –†–ï–ñ–ò–ú

‚ùì –í–æ–ø—Ä–æ—Å: –ö–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –µ—Å—Ç—å —É –±–æ—Ç–∞?

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

–ë–æ—Ç –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:
- /start - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- /clear - –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
- /stats - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- /with_rag - RAG —Ä–µ–∂–∏–º —Å –∏—Å—Ç–æ—Ä–∏–µ–π
...

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìö –ò–°–¢–û–ß–ù–ò–ö–ò (5 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤):

1. Similarity: 0.804
   "# Telegram –±–æ—Ç —Å Claude AI - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥..."
2. Similarity: 0.753
   "### –ü–æ–≥–æ–¥–∞ —á–µ—Ä–µ–∑ MCP Weather Server..."
...

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚è±Ô∏è –í—Ä–µ–º—è: 12.34—Å | üìä –ò—Å—Ç–æ—Ä–∏—è: 2/20 —Å–æ–æ–±—â–µ–Ω–∏–π
üîß –ú–æ–¥–µ–ª—å: llama3.2:3b
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (v9.1)
```
telegram-bot/
‚îú‚îÄ‚îÄ bot.py                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (73 —Å—Ç—Ä–æ–∫–∏)
‚îú‚îÄ‚îÄ config.py                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ mcp_clients/                # MCP –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py             # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö MCP
‚îÇ   ‚îú‚îÄ‚îÄ weather_client.py       # Weather MCP
‚îÇ   ‚îú‚îÄ‚îÄ news_client.py          # News MCP
‚îÇ   ‚îú‚îÄ‚îÄ mobile_client.py        # Mobile MCP (SSH)
‚îÇ   ‚îî‚îÄ‚îÄ ollama_client.py        # Ollama MCP –¥–ª—è RAG
‚îú‚îÄ‚îÄ handlers/                   # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ basic.py                # –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îî‚îÄ‚îÄ with_rag.py             # RAG —Ä–µ–∂–∏–º ‚≠ê –ù–û–í–û–ï!
‚îî‚îÄ‚îÄ utils/                      # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ helpers.py              # send_long_message
    ‚îî‚îÄ‚îÄ rag_functions.py        # RAG –ª–æ–≥–∏–∫–∞
```

### –°—Ö–µ–º–∞ RAG Pipeline
```
User Question
     ‚Üì
/with_rag handler
     ‚Üì
utils/rag_functions.py
     ‚Üì
MCP Ollama Client (SSH)
     ‚Üì
Mac: MCP Ollama Server
     ‚Üì
1. nomic-embed-text (—ç–º–±–µ–¥–¥–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞)
2. Cosine similarity (—Ç–æ–ø-10 —á–∞–Ω–∫–æ–≤)
3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (similarity ‚â• 0.3, –º–∞–∫—Å 5)
4. llama3.2:3b (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞)
     ‚Üì
Response + Sources
     ‚Üì
Save to RAG History (20 messages)
     ‚Üì
Display to User
```

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (Ubuntu):**
- Python 3.12+
- Node.js 20.x
- systemd –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

**–ù–∞ Mac (–¥–ª—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤):**
- Node.js 20.x
- Ollama —Å –º–æ–¥–µ–ª—è–º–∏ `nomic-embed-text` –∏ `llama3.2:3b`
- Android Studio + SDK (–¥–ª—è mobile-mcp, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ß–∞—Å—Ç—å 1: –°–µ—Ä–≤–µ—Ä (Python Bot + MCP Weather/News)

#### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/KuzminVik/telegram-claude-bot.git
cd telegram-claude-bot
```

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

**requirements.txt:**
```
python-telegram-bot==21.0
anthropic==0.75.0
apscheduler==3.10.4
```

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
export TELEGRAM_BOT_TOKEN="your_telegram_bot_token"
export ANTHROPIC_API_KEY="your_anthropic_api_key"
```

---

### –ß–∞—Å—Ç—å 2: Mac (MCP Ollama + RAG)

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ollama —Å https://ollama.ai
brew install ollama

# –°–∫–∞—á–∞–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥–µ–ª–∏
ollama pull nomic-embed-text  # –î–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (768 –∏–∑–º–µ—Ä–µ–Ω–∏–π)
ollama pull llama3.2:3b        # –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Ollama
ollama serve
```

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MCP Ollama Server
```bash
cd ~/mcp-servers/ollama-mcp
npm install
```

#### 3. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –±–æ—Ç–∞
```bash
cd ~/mcp-servers/ollama-mcp

# –°–æ–∑–¥–∞–π—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p ~/vector_stores

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è vector store
VECTOR_STORE_DIR=~/vector_stores node create_vector_store_v2.js

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–∞–∑–∞ —Å–æ–∑–¥–∞–ª–∞—Å—å
ls -lh ~/vector_stores/bot_knowledge.json
```

#### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH Tunnel

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ README –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Reverse SSH tunnel –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–æ–º –∏ Mac.

---

### –ß–∞—Å—Ç—å 3: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

#### 1. –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞
```bash
sudo nano /etc/systemd/system/telegram-bot.service
```
```ini
[Unit]
Description=Telegram Claude Bot
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/telegram-bot
Environment="TELEGRAM_BOT_TOKEN=your_token"
Environment="ANTHROPIC_API_KEY=your_key"
ExecStart=/root/telegram-bot/venv/bin/python /root/telegram-bot/bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

#### 2. –ó–∞–ø—É—Å–∫
```bash
sudo systemctl daemon-reload
sudo systemctl enable telegram-bot
sudo systemctl start telegram-bot
sudo systemctl status telegram-bot
```

---

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç RAG —Ä–µ–∂–∏–º

### –ê–ª–≥–æ—Ä–∏—Ç–º `/with_rag`:

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞** –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞** –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ `nomic-embed-text`
3. **–ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö —á–∞–Ω–∫–æ–≤** –ø–æ cosine similarity (—Ç–æ–ø-10)
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
   - –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ —á–∞–Ω–∫–∏ —Å similarity ‚â• 0.3
   - –ú–∞–∫—Å–∏–º—É–º 5 —Å–∞–º—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
5. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** –∏–∑ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
6. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞** —á–µ—Ä–µ–∑ `llama3.2:3b` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
7. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é:**
   - User message: –≤–æ–ø—Ä–æ—Å
   - Assistant message: –æ—Ç–≤–µ—Ç
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–µ–∑–∞–Ω–∏–µ –¥–æ 20 —Å–æ–æ–±—â–µ–Ω–∏–π
8. **–í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:

‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - –±–æ—Ç –ø–æ–º–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã  
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏  
‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ similarity –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å  
‚úÖ **–ú–µ—Ç—Ä–∏–∫–∏** - –≤–∏–¥–Ω–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤  

---

## üìà Changelog

### v9.1.0 (11.01.2026) - RAG Mode —Å –∏—Å—Ç–æ—Ä–∏–µ–π ‚≠ê
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/with_rag` - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π RAG —Ä–µ–∂–∏–º
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è RAG –¥–∏–∞–ª–æ–≥–∞ (20 —Å–æ–æ–±—â–µ–Ω–∏–π)
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã `/clear_rag` –∏ `/rag_history`
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å similarity scores
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Ollama client –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### v9.0.0 (24.12.2024) - RAG Smart Filtering
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ similarity (light/strict —Ä–µ–∂–∏–º—ã)
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/compare` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚úÖ –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è vector stores

### v8.0.0 (24.12.2024) - –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥—É–ª–∏ (handlers, mcp_clients, utils)
- ‚úÖ –ß–∏—Å—Ç—ã–π –∫–æ–¥ (~1000 —Å—Ç—Ä–æ–∫)

### v7.0.0 (23.12.2024) - Ollama RAG Integration
- ‚úÖ –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## ü§ù –í–∫–ª–∞–¥

–ü—Ä–æ–µ–∫—Ç –æ—Ç–∫—Ä—ã—Ç –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π! –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–¥–µ–∏ –∏–ª–∏ –Ω–∞—à–ª–∏ –±–∞–≥ - —Å–æ–∑–¥–∞–π—Ç–µ Issue –∏–ª–∏ Pull Request.

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

**–í–∏–∫—Ç–æ—Ä –ö—É–∑—å–º–∏–Ω**
- GitHub: [@KuzminVik](https://github.com/KuzminVik)
- Telegram –±–æ—Ç: —Å–æ–∑–¥–∞–Ω —Å –ø–æ–º–æ—â—å—é Claude AI (Anthropic)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [WORK_SUMMARY_2026-01-11.md](./WORK_SUMMARY_2026-01-11.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã v9.1
- [MODULAR_ARCHITECTURE_SUMMARY_2024-12-24.md](./MODULAR_ARCHITECTURE_SUMMARY_2024-12-24.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v9.0

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 11 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 9.1.0
