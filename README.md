# ๐ค Telegram ะฑะพั ั Claude AI + Weather + News + Mobile + RAG

Telegram ะฑะพั ั Claude AI, ะฟะพะณะพะดะพะน, ะฝะพะฒะพัััะผะธ, ัะฟัะฐะฒะปะตะฝะธะตะผ Android ัะผัะปััะพัะพะผ ะธ RAG ะฟะพะธัะบะพะผ ัะตัะตะท MCP ัะตัะฒะตัั.

[![Python](https://img.shields.io/badge/Python-3.12-blue.svg)](https://www.python.org/)
[![Telegram Bot API](https://img.shields.io/badge/Telegram%20Bot%20API-21.0-blue.svg)](https://python-telegram-bot.org/)
[![Claude AI](https://img.shields.io/badge/Claude-Sonnet%204-purple.svg)](https://www.anthropic.com/)
[![Node.js](https://img.shields.io/badge/Node.js-20.x-green.svg)](https://nodejs.org/)
[![Android](https://img.shields.io/badge/Android-API%2034-green.svg)](https://developer.android.com/)
[![Ollama](https://img.shields.io/badge/Ollama-nomic--embed--text-orange.svg)](https://ollama.ai/)

---

## ๐ฏ ะะพะทะผะพะถะฝะพััะธ

### ๐ฌ ะะฐะทะณะพะฒะพั ั Claude AI
- ะะพะดะดะตัะถะบะฐ ะธััะพัะธะธ ะดะธะฐะปะพะณะฐ (ะดะพ 30 ัะพะพะฑัะตะฝะธะน)
- ะะฒัะพะผะฐัะธัะตัะบะพะต ัะถะฐัะธะต ะธััะพัะธะธ ัะตัะตะท Claude
- ะะตััะธััะตะฝัะฝะพะต ััะฐะฝะตะฝะธะต ะฒ JSON (ัะพััะฐะฝัะตััั ะฟัะธ ะฟะตัะตะทะฐะฟััะบะต)
- ะะพะบะฐะท ััะฐัะธััะธะบะธ ัะพะบะตะฝะพะฒ

### ๐ค๏ธ ะะพะณะพะดะฐ (ัะตัะตะท MCP Weather Server)
- **ะขะตะบััะฐั ะฟะพะณะพะดะฐ** ะดะปั ะปัะฑะพะณะพ ะณะพัะพะดะฐ
- **ะัะพะณะฝะพะท ะฝะฐ ะดะตะฝั:** ะผะฐะบั/ะผะธะฝ ัะตะผะฟะตัะฐัััะฐ, ะพัะฐะดะบะธ, ะฒะพััะพะด/ะทะฐะบะฐั
- **ะกัะฐะฒะฝะตะฝะธะต ั ะฒัะตัะฐ:** Claude ะฐะฝะฐะปะธะทะธััะตั ะธะทะผะตะฝะตะฝะธั
- **ะฃััะตะฝะฝัั ัะฐัััะปะบะฐ** ะฒ 08:00 MSK ั ะดะฐะนะดะถะตััะพะผ

### ๐ฐ ะะพะฒะพััะธ (ัะตัะตะท MCP News Server)
- **RSS ะฝะพะฒะพััะธ** ะธะท ัะพััะธะนัะบะธั ะธััะพัะฝะธะบะพะฒ
- **3 ะบะฐัะตะณะพัะธะธ:** ะพะฑัะธะต, ัะตัะฝะพะปะพะณะธะธ, ะฑะธะทะฝะตั
- **ะขะพะฟ ะฝะพะฒะพััะธ** ะฒ ัััะตะฝะฝะตะน ัะฐัััะปะบะต
- **ะะพะผะฐะฝะดะฐ /morning_digest** - ะฟะพะณะพะดะฐ + ะฝะพะฒะพััะธ

### ๐ฑ Android ะญะผัะปััะพั (ัะตัะตะท MCP Mobile Server)
- **ะกะฟะธัะพะบ ััััะพะนััะฒ** - ะฟัะพัะผะพัั ะดะพัััะฟะฝัั ัะผัะปััะพัะพะฒ
- **ะะฐะฟััะบ ัะผัะปััะพัะฐ** - ะฐะฒัะพะผะฐัะธัะตัะบะธะน ััะฐัั ะตัะปะธ ะฒัะบะปััะตะฝ
- **ะกัะฐััั ะฟัะพะฒะตัะบะฐ** - ะณะพัะพะฒ ะปะธ ัะผัะปััะพั ะบ ัะฐะฑะพัะต
- **ะฃะดะฐะปัะฝะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต** - ัะตัะตะท SSH tunnel ั Mac ะฝะฐ ัะตัะฒะตั
- **ะะพะดะดะตัะถะบะฐ Appium** - ะณะพัะพะฒะฝะพััั ะดะปั UI ะฐะฒัะพะผะฐัะธะทะฐัะธะธ

### ๐ RAG ะะฐะทะฐ ะทะฝะฐะฝะธะน (ัะตัะตะท MCP Ollama Server)
- **ะะตะบัะพัะฝัะน ะฟะพะธัะบ** ะฟะพ ะดะพะบัะผะตะฝัะฐัะธะธ ะฑะพัะฐ
- **768-ะผะตัะฝัะต ัะผะฑะตะดะดะธะฝะณะธ** ัะตัะตะท nomic-embed-text
- **ะะฒัะพะผะฐัะธัะตัะบะธะน ะฒัะฑะพั** Claude ะธัะฟะพะปัะทัะตั ะฟัะธ ะฒะพะฟัะพัะฐั ะพ ะฑะพัะต
- **ะะพัะธะฝััะฝะพะต ััะพะดััะฒะพ** ะดะปั ัะฐะฝะถะธัะพะฒะฐะฝะธั ัะตะทัะปััะฐัะพะฒ

### ๐ฌ RAG ะกัะฐะฒะฝะตะฝะธะต โญ **ะะะะะ!**
- **ะะพะผะฐะฝะดะฐ /compare** - A/B ัะตััะธัะพะฒะฐะฝะธะต RAG vs No-RAG
- **ะะฐัะฐะปะปะตะปัะฝัะต ะทะฐะฟัะพัั** - ะฟะพะปััะตะฝะธะต ะพะฑะพะธั ะพัะฒะตัะพะฒ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ
- **ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ:**
  - ะัะตะผั ะฒัะฟะพะปะฝะตะฝะธั (RAG: ~37ั, Claude: ~10ั)
  - ะะตะปะตะฒะฐะฝัะฝะพััั ะธััะพัะฝะธะบะพะฒ (0.64-0.68)
  - ะขะพะบะตะฝั ะธ ััะพะธะผะพััั
- **ะกะพััะฐะฝะตะฝะธะต ัะตะทัะปััะฐัะพะฒ** ะฒ rag_comparisons.json ะดะปั ะฐะฝะฐะปะธะทะฐ
- **ะกัะฐัะธััะธะบะฐ:** RAG ะฝะฐัะพะดะธั ะธััะพัะฝะธะบะธ ะฒ 100% ัะปััะฐะตะฒ

### ๐ง ะะฝััััะผะตะฝัั Claude
- `get_weather(city)` - ะฟะพะปััะธัั ะฟะพะณะพะดั
- `get_news(category, limit)` - ะฟะพะปััะธัั ะฝะพะฒะพััะธ
- `mobile_list_available_devices()` - ัะฟะธัะพะบ Android ััััะพะนััะฒ
- `mobile_start_emulator()` - ะทะฐะฟัััะธัั ัะผัะปััะพั
- `search_knowledge(query, top_k)` - ะฟะพะธัะบ ะฒ ะฑะฐะทะต ะทะฝะฐะฝะธะน

---

## ๐๏ธ ะััะธัะตะบัััะฐ

### ะะพะดัะปัะฝะฐั ััััะบัััะฐ (v8.0)

```
telegram-bot/
โโโ bot.py                      # ะขะพัะบะฐ ะฒัะพะดะฐ (140 ัััะพะบ)
โโโ config.py                   # ะะพะฝัะธะณััะฐัะธั (100 ัััะพะบ)
โโโ mcp_clients/                # MCP ะบะปะธะตะฝัั
โ   โโโ __init__.py
โ   โโโ weather_client.py      # Weather MCP
โ   โโโ news_client.py         # News MCP
โ   โโโ mobile_client.py       # Mobile MCP (SSH)
โ   โโโ ollama_client.py       # Ollama MCP ะดะปั RAG
โโโ handlers/                   # ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด
โ   โโโ __init__.py
โ   โโโ basic.py               # /start, /clear, /stats
โ   โโโ rag_compare.py         # /compare - RAG ััะฐะฒะฝะตะฝะธะต
โโโ utils/                      # ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ
    โโโ __init__.py
    โโโ helpers.py             # send_long_message
    โโโ rag_functions.py       # RAG ะปะพะณะธะบะฐ

ะัะตะณะพ: ~1000 ัััะพะบ ัะธััะพะณะพ ะผะพะดัะปัะฝะพะณะพ ะบะพะดะฐ
```

### ะกัะตะผะฐ ะฒะทะฐะธะผะพะดะตะนััะฒะธั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  Telegram Bot (Python) - ะกะตัะฒะตั                 โ
โ                                                                  โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ   Handlers   โ  โ APScheduler  โ  โ   4x MCP Clients     โ  โ
โ  โ              โ  โ              โ  โ                      โ  โ
โ  โ /compare     โ  โ  08:00 daily โ  โ Weather+News+       โ  โ
โ  โ /morning_    โ  โ  broadcast   โ  โ Mobile+Ollama        โ  โ
โ  โ  digest      โ  โ              โ  โ                      โ  โ
โ  โ /start_      โ  โ              โ  โ                      โ  โ
โ  โ  emulator    โ  โ              โ  โ                      โ  โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                              โ                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโ
        โ                   โ                  โ
        โ                   โ                  โ SSH Tunnel (localhost:2222)
โโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ MCP Weather   โ  โ  MCP News     โ  โ                          โ
โ  (Node.js)    โ  โ  (Node.js)    โ  โ  Mac (ะปะพะบะฐะปัะฝัะน)         โ
โ  Open-Meteo   โ  โ  RSS Feeds    โ  โ                          โ
โโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโ  โ  โโโโโโโโโโโโโโโโโโโโโ   โ
                                      โ  โ MCP Mobile        โ   โ
                                      โ  โ Appium+Emulator   โ   โ
                                      โ  โโโโโโโโโโโโโโโโโโโโโ   โ
                                      โ  โโโโโโโโโโโโโโโโโโโโโ   โ
                                      โ  โ MCP Ollama        โ   โ
                                      โ  โ RAG+Embeddings    โ   โ
                                      โ  โ (768D vectors)    โ   โ
                                      โ  โโโโโโโโโโโโโโโโโโโโโ   โ
                                      โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฑ ะะพะผะฐะฝะดั ะฑะพัะฐ

### ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั:
- `/start` - ะัะธะฒะตัััะฒะธะต ะธ ัะฟะธัะพะบ ะบะพะผะฐะฝะด
- `/clear` - ะัะธััะธัั ะธััะพัะธั ะดะธะฐะปะพะณะฐ
- `/stats` - ะะพะบะฐะทะฐัั ััะฐัะธััะธะบั (ัะพะพะฑัะตะฝะธั, ัะฐะทะผะตั ัะฐะนะปะฐ)
- `/debug` - ะะพะบะฐะทะฐัั ะฟะพัะปะตะดะฝะตะต ัะพะพะฑัะตะฝะธะต

### RAG ะกัะฐะฒะฝะตะฝะธะต: โญ **ะะะะะ!**
- `/compare <ะฒะพะฟัะพั>` - ะกัะฐะฒะฝะธัั ะพัะฒะตัั RAG vs ัะธัััะน Claude
  - ะะพะบะฐะทัะฒะฐะตั ะพะฑะฐ ะพัะฒะตัะฐ ะฟะฐัะฐะปะปะตะปัะฝะพ
  - ะะตััะธะบะธ ะฒัะตะผะตะฝะธ ะธ ัะตะปะตะฒะฐะฝัะฝะพััะธ
  - ะกะพััะฐะฝัะตั ัะตะทัะปััะฐัั ะดะปั ะฐะฝะฐะปะธะทะฐ

### ะะพะณะพะดะฐ:
- `/weather_subscribe ะะพัะพะด` - ะะพะดะฟะธัะฐัััั ะฝะฐ ัััะตะฝะฝัั ะฟะพะณะพะดั
- `/weather_unsubscribe` - ะัะฟะธัะฐัััั ะพั ะฟะพะณะพะดั
- `/weather_list` - ะะพะบะฐะทะฐัั ัะตะบัััั ะฟะพะดะฟะธัะบั

### ะะพะฒะพััะธ:
- `/morning_digest` - ะะพะปััะธัั ะดะฐะนะดะถะตัั (ะฟะพะณะพะดะฐ + ะฝะพะฒะพััะธ) ะฟััะผะพ ัะตะนัะฐั

### ะะพะฑะธะปัะฝัะต ััััะพะนััะฒะฐ:
- `/mobile_devices` - ะะพะบะฐะทะฐัั ะดะพัััะฟะฝัะต Android ััััะพะนััะฒะฐ
- `/start_emulator` - ะะฐะฟัััะธัั Android ัะผัะปััะพั

### ะกะปัะถะตะฑะฝัะต:
- `/test_morning` - ะัะพัะตััะธัะพะฒะฐัั ัััะตะฝะฝัั ัะฐัััะปะบั

---

## ๐ฆ ะฃััะฐะฝะพะฒะบะฐ

### ะงะฐััั 1: ะกะตัะฒะตั (Python Bot + MCP Weather/News)

#### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั

```bash
git clone https://github.com/KuzminVik/telegram-claude-bot.git
cd telegram-claude-bot
```

#### 2. ะฃััะฐะฝะพะฒะบะฐ Python ะทะฐะฒะธัะธะผะพััะตะน

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

**requirements.txt:**
```
python-telegram-bot==21.0
anthropic==0.75.0
apscheduler==3.10.4
```

#### 3. ะฃััะฐะฝะพะฒะบะฐ MCP Weather Server

```bash
cd /home/claude/mcp-weather-server
npm install
npm test  # ะัะพะฒะตัะบะฐ ัะฐะฑะพัั
```

#### 4. ะฃััะฐะฝะพะฒะบะฐ MCP News Server

```bash
cd /home/claude/mcp-news-server
npm install
npm test  # ะัะพะฒะตัะบะฐ ัะฐะฑะพัั
```

#### 5. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

```bash
export TELEGRAM_BOT_TOKEN="your_telegram_bot_token"
export ANTHROPIC_API_KEY="your_anthropic_api_key"
```

---

### ะงะฐััั 2: Mac (MCP Mobile Server + Appium + Emulator) โญ **ะะะะะ!**

#### 1. ะฃััะฐะฝะพะฒะบะฐ Java JDK

```bash
# ะัะพะฒะตัะบะฐ ัััะฐะฝะพะฒะบะธ
java -version
```

ะัะปะธ ะฝะตั - ัััะฐะฝะพะฒะธัะต OpenJDK 17+

#### 2. ะฃััะฐะฝะพะฒะบะฐ Android Studio + SDK

1. ะกะบะฐัะฐะนัะต [Android Studio](https://developer.android.com/studio)
2. ะฃััะฐะฝะพะฒะธัะต Android SDK
3. ะกะพะทะดะฐะนัะต AVD (Android Virtual Device):
   - Tools โ Device Manager โ Create Device
   - ะัะฑะตัะธัะต Pixel 8
   - ะกะบะฐัะฐะนัะต API 34 system image
   - ะกะพะทะดะฐะนัะต ัะผัะปััะพั

#### 3. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

ะะพะฑะฐะฒััะต ะฒ `~/.zshrc`:

```bash
export ANDROID_HOME=/Users/YOUR_USER/Library/android/sdk
export PATH=$ANDROID_HOME/platform-tools:$ANDROID_HOME/emulator:$PATH
```

```bash
source ~/.zshrc
```

#### 4. ะฃััะฐะฝะพะฒะบะฐ Appium

```bash
# ะฃััะฐะฝะพะฒะบะฐ Appium
npm install -g appium

# ะฃััะฐะฝะพะฒะบะฐ UiAutomator2 ะดัะฐะนะฒะตัะฐ
appium driver install uiautomator2

# ะัะพะฒะตัะบะฐ
appium -v
```

#### 5. ะฃััะฐะฝะพะฒะบะฐ mobile-mcp

```bash
# ะะปะพะฝะธัะพะฒะฐะฝะธะต
cd ~/mcp-servers
git clone https://github.com/mobile-next/mobile-mcp.git
cd mobile-mcp

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
npm install

# ะกะฑะพัะบะฐ
npm run build
```

#### 6. ะกะพะทะดะฐะฝะธะต ัะบัะธะฟัะฐ ะทะฐะฟััะบะฐ ัะผัะปััะพัะฐ

```bash
nano ~/start-emulator.sh
```

ะััะฐะฒััะต:

```bash
#!/bin/bash

EMULATOR_NAME="Pixel_8_API_34_3"  # ะะฐะผะตะฝะธัะต ะฝะฐ ะธะผั ะฒะฐัะตะณะพ AVD
ANDROID_SDK="/Users/YOUR_USER/Library/android/sdk"

# ะัะพะฒะตััะตะผ ะทะฐะฟััะตะฝ ะปะธ ัะผัะปััะพั
RUNNING=$(${ANDROID_SDK}/platform-tools/adb devices | grep "emulator-" | grep "device$")

if [ -n "$RUNNING" ]; then
    DEVICE_ID=$(echo "$RUNNING" | awk '{print $1}')
    echo "{\"status\":\"already_running\",\"device_id\":\"$DEVICE_ID\",\"message\":\"ะญะผัะปััะพั ัะถะต ะทะฐะฟััะตะฝ ะธ ะณะพัะพะฒ ะบ ัะฐะฑะพัะต\"}"
else
    # ะะฐะฟััะบะฐะตะผ ัะผัะปััะพั
    nohup ${ANDROID_SDK}/emulator/emulator -avd ${EMULATOR_NAME} > /tmp/emulator.log 2>&1 &
    sleep 10
    
    DEVICE_ID=$(${ANDROID_SDK}/platform-tools/adb devices | grep "emulator-" | grep "device$" | awk '{print $1}')
    
    if [ -n "$DEVICE_ID" ]; then
        echo "{\"status\":\"started\",\"device_id\":\"$DEVICE_ID\",\"message\":\"ะญะผัะปััะพั ััะฟะตัะฝะพ ะทะฐะฟััะตะฝ\"}"
    else
        echo "{\"status\":\"error\",\"message\":\"ะะต ัะดะฐะปะพัั ะทะฐะฟัััะธัั ัะผัะปััะพั\"}"
    fi
fi
```

```bash
chmod +x ~/start-emulator.sh
```

#### 7. ะะฐัััะพะนะบะฐ Reverse SSH Tunnel

ะะฐ Mac ะณะตะฝะตัะธััะตะผ SSH ะบะปัั:

```bash
ssh-keygen -t ed25519 -C "mac-to-server" -f ~/.ssh/mac_to_server
# ะะฐะถะธะผะฐะนัะต Enter (ะฑะตะท passphrase!)
```

ะะพะฟะธััะตะผ ะบะปัั ะฝะฐ ัะตัะฒะตั:

```bash
ssh-copy-id -i ~/.ssh/mac_to_server.pub root@YOUR_SERVER_IP
```

ะกะพะทะดะฐัะผ ัะบัะธะฟั ััะฝะฝะตะปั:

```bash
nano ~/ssh-tunnel.sh
```

```bash
#!/bin/bash
export PATH=/usr/bin:/bin:/usr/sbin:/sbin
export HOME=/Users/YOUR_USER

/usr/bin/ssh \
    -i "$HOME/.ssh/mac_to_server" \
    -R 2222:localhost:22 \
    -N \
    -o StrictHostKeyChecking=no \
    -o UserKnownHostsFile=/dev/null \
    -o ServerAliveInterval=60 \
    -o ServerAliveCountMax=3 \
    -o ExitOnForwardFailure=yes \
    root@YOUR_SERVER_IP
```

```bash
chmod +x ~/ssh-tunnel.sh
```

ะกะพะทะดะฐัะผ LaunchAgent ะดะปั ะฐะฒัะพะทะฐะฟััะบะฐ:

```bash
mkdir -p ~/Library/LaunchAgents
nano ~/Library/LaunchAgents/com.user.ssh-reverse-tunnel.plist
```

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.user.ssh-reverse-tunnel</string>
    <key>ProgramArguments</key>
    <array>
        <string>/Users/YOUR_USER/ssh-tunnel.sh</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
    <key>KeepAlive</key>
    <true/>
    <key>StandardErrorPath</key>
    <string>/tmp/ssh-tunnel-error.log</string>
    <key>StandardOutPath</key>
    <string>/tmp/ssh-tunnel-out.log</string>
</dict>
</plist>
```

ะะฐะณััะทะบะฐ LaunchAgent:

```bash
launchctl load ~/Library/LaunchAgents/com.user.ssh-reverse-tunnel.plist
launchctl list | grep ssh-reverse-tunnel
```

#### 8. ะะฐัััะพะนะบะฐ SSH ะบะปััะฐ ะฝะฐ ัะตัะฒะตัะต ะดะปั ะฟะพะดะบะปััะตะฝะธั ะบ Mac

ะะฐ ัะตัะฒะตัะต:

```bash
ssh-keygen -t ed25519 -C "server-to-mac" -f ~/.ssh/server_to_mac
```

ะะพะฟะธััะตะผ ะฟัะฑะปะธัะฝัะน ะบะปัั:

```bash
cat ~/.ssh/server_to_mac.pub
```

ะะฐ Mac ะดะพะฑะฐะฒะปัะตะผ ะฒ `~/.ssh/authorized_keys`:

```bash
nano ~/.ssh/authorized_keys
# ะััะฐะฒััะต ะฟัะฑะปะธัะฝัะน ะบะปัั ั ัะตัะฒะตัะฐ
chmod 600 ~/.ssh/authorized_keys
```

ะขะตัั ั ัะตัะฒะตัะฐ:

```bash
ssh -i ~/.ssh/server_to_mac -p 2222 YOUR_MAC_USER@localhost "hostname"
```

---

### ะงะฐััั 3: ะะฐะฟััะบ ะฑะพัะฐ ะฝะฐ ัะตัะฒะตัะต

#### 1. ะะฑะฝะพะฒะปะตะฝะธะต bot.py

ะฃะฑะตะดะธัะตัั ััะพ ะฒ `bot.py` ะฟัะฐะฒะธะปัะฝะพ ัะบะฐะทะฐะฝั ะฟััะธ:

```python
# SSH ะบะพะฝัะธะณััะฐัะธั ะดะปั mobile-mcp
MCP_MOBILE_SSH_HOST = "localhost"
MCP_MOBILE_SSH_PORT = 2222
MCP_MOBILE_SSH_USER = "YOUR_MAC_USER"
MCP_MOBILE_SSH_KEY = "/root/.ssh/server_to_mac"
MCP_MOBILE_NODE_PATH = "/Users/YOUR_MAC_USER/.nvm/versions/node/v20.19.6/bin/node"
MCP_MOBILE_SERVER_PATH = "/Users/YOUR_MAC_USER/mcp-servers/mobile-mcp/lib/index.js"
MCP_MOBILE_START_EMULATOR_SCRIPT = "/Users/YOUR_MAC_USER/start-emulator.sh"
```

#### 2. ะกะพะทะดะฐะฝะธะต systemd ัะตัะฒะธัะฐ

```bash
sudo nano /etc/systemd/system/telegram-bot.service
```

```ini
[Unit]
Description=Telegram Claude Bot
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/telegram-bot
Environment="TELEGRAM_BOT_TOKEN=your_token"
Environment="ANTHROPIC_API_KEY=your_key"
ExecStart=/root/telegram-bot/venv/bin/python /root/telegram-bot/bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

#### 3. ะะฐะฟััะบ

```bash
sudo systemctl daemon-reload
sudo systemctl enable telegram-bot
sudo systemctl start telegram-bot
sudo systemctl status telegram-bot
```

---

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### 1. ะขะตัั Appium ะฝะฐ Mac

```bash
# ะะฐะฟัััะธัะต Appium ะฒ ะพะดะฝะพะผ ัะตัะผะธะฝะฐะปะต
appium

# ะ ะดััะณะพะผ ัะตัะผะธะฝะฐะปะต ะทะฐะฟัััะธัะต ัะผัะปััะพั
~/Library/android/sdk/emulator/emulator -avd Pixel_8_API_34_3 &

# ะัะพะฒะตัััะต ััะพ ัะผัะปััะพั ะฒะธะดะตะฝ
~/Library/android/sdk/platform-tools/adb devices
```

### 2. ะขะตัั mobile-mcp ะฝะฐ Mac

```bash
cd ~/mcp-servers/mobile-mcp

# ะขะตัั ัะตัะตะท stdio
echo '{"jsonrpc":"2.0","method":"tools/call","params":{"name":"mobile_list_available_devices","arguments":{"noParams":{}}},"id":1}' | node lib/index.js
```

ะะพะปะถะฝะพ ะฒะตัะฝััั ัะฟะธัะพะบ ััััะพะนััะฒ ะฒ JSON.

### 3. ะขะตัั SSH ััะฝะฝะตะปั

ะก ัะตัะฒะตัะฐ:

```bash
ssh -i ~/.ssh/server_to_mac -p 2222 YOUR_MAC_USER@localhost "hostname"
```

ะะพะปะถะฝะพ ะฒัะฒะตััะธ ะธะผั Mac.

### 4. ะขะตัั ัะบัะธะฟัะฐ ะทะฐะฟััะบะฐ ัะผัะปััะพัะฐ

ะก ัะตัะฒะตัะฐ ัะตัะตะท SSH:

```bash
ssh -i ~/.ssh/server_to_mac -p 2222 YOUR_MAC_USER@localhost "/Users/YOUR_MAC_USER/start-emulator.sh"
```

ะะพะปะถะฝะพ ะฒะตัะฝััั JSON ัะพ ััะฐัััะพะผ.

### 5. ะขะตัั ะฑะพัะฐ ะฒ Telegram

1. `/start` - ะฟัะพะฒะตัะธัั ัะฟะธัะพะบ ะบะพะผะฐะฝะด
2. `/mobile_devices` - ะดะพะปะถะตะฝ ะฟะพะบะฐะทะฐัั Pixel 8
3. `/start_emulator` - ะดะพะปะถะตะฝ ะทะฐะฟัััะธัั ะธะปะธ ัะพะพะฑัะธัั ััะพ ัะถะต ัะฐะฑะพัะฐะตั
4. "ะะพะบะฐะถะธ ะดะพัััะฟะฝัะต Android ััััะพะนััะฒะฐ" - Claude ะธัะฟะพะปัะทัะตั ะธะฝััััะผะตะฝั
5. "ะะฐะฟัััะธ ัะผัะปััะพั" - Claude ะธัะฟะพะปัะทัะตั ะธะฝััััะผะตะฝั

---

## ๐ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัะธะผะตั 1: ะกะฟะธัะพะบ ััััะพะนััะฒ

**ะะพะปัะทะพะฒะฐัะตะปั:** `/mobile_devices`

**ะะพั:**
```
๐ฑ ะะพัััะฟะฝัะต ััััะพะนััะฒะฐ:

1. Pixel 8 API 34 3
   ID: emulator-5554
   ะะปะฐััะพัะผะฐ: android
   ะขะธะฟ: emulator
   ะะตััะธั: 14
   ะกัะฐััั: ๐ข online
```

### ะัะธะผะตั 2: ะะฐะฟััะบ ัะผัะปััะพัะฐ

**ะะพะปัะทะพะฒะฐัะตะปั:** `/start_emulator`

**ะะพั (ะตัะปะธ ัะถะต ะทะฐะฟััะตะฝ):**
```
โ ะญะผัะปััะพั ัะถะต ะทะฐะฟััะตะฝ ะธ ะณะพัะพะฒ ะบ ัะฐะฑะพัะต

๐ฑ ID ััััะพะนััะฒะฐ: emulator-5554
```

**ะะพั (ะตัะปะธ ะฑัะป ะฒัะบะปััะตะฝ):**
```
๐ ะญะผัะปััะพั ััะฟะตัะฝะพ ะทะฐะฟััะตะฝ

๐ฑ ID ััััะพะนััะฒะฐ: emulator-5554

ะญะผัะปััะพั ะณะพัะพะฒ ะบ ัะฐะฑะพัะต!
```

### ะัะธะผะตั 3: ะงะตัะตะท Claude

**ะะพะปัะทะพะฒะฐัะตะปั:** "ะญะผัะปััะพั ะณะพัะพะฒ ะบ ัะฐะฑะพัะต?"

**ะะพั:** (Claude ะฒัะทัะฒะฐะตั `mobile_start_emulator` ะธ ะพัะฒะตัะฐะตั ะฝะฐ ะพัะฝะพะฒะต ััะฐัััะฐ)

### ะัะธะผะตั 4: RAG ะกัะฐะฒะฝะตะฝะธะต โญ **ะะะะะ!**

**ะะพะปัะทะพะฒะฐัะตะปั:** `/compare ะะฐะบะธะต ะบะพะผะฐะฝะดั ะตััั ั ะฑะพัะฐ?`

**ะะพั:**
```
๐ฌ ะกะะะะะะะะ RAG vs ะะะ RAG

โ ะะพะฟัะพั: ะะฐะบะธะต ะบะพะผะฐะฝะดั ะตััั ั ะฑะพัะฐ?

โโโโโโโโโโโโโโโโโโโโ

๐ง ะก RAG (Retrieval-Augmented Generation):

ะะฐ ะพัะฝะพะฒะต ะดะพะบัะผะตะฝัะฐัะธะธ ะฑะพัะฐ ะดะพัััะฟะฝั ัะปะตะดัััะธะต ะบะพะผะฐะฝะดั:
/start, /clear, /stats, /debug, /weather_subscribe...

๐ ะััะพัะฝะธะบะธ (3 ัะฐะฝะบะพะฒ):
1. ะะตะปะตะฒะฐะฝัะฝะพััั: 0.68
   "ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั: /start - ะัะธะฒะตัััะฒะธะต..."
2. ะะตะปะตะฒะฐะฝัะฝะพััั: 0.67
   "ะะพะณะพะดะฐ: /weather_subscribe ะะพัะพะด..."

โฑ๏ธ ะัะตะผั: 45.14ั | ะะพะดะตะปั: llama3.2:3b

โโโโโโโโโโโโโโโโโโโโ

๐ค ะะะ RAG (ัะธัััะน Claude):

ะฃ ะฑะพัะฐ ะตััั ะบะพะผะฐะฝะดั ะดะปั ัะฟัะฐะฒะปะตะฝะธั, ะฟะพะณะพะดั, ะฝะพะฒะพััะตะน...

โฑ๏ธ ะัะตะผั: 8.58ั | ะะพะดะตะปั: claude-sonnet-4
๐ ะขะพะบะตะฝั: 45 ะฒัะพะด / 120 ะฒััะพะด

โโโโโโโโโโโโโโโโโโโโ

๐ ะะะขะะะะ:
โข ะกะบะพัะพััั: Claude ะฑััััะตะต ะฝะฐ 36.6ั
โข ะะตะปะตะฒะฐะฝัะฝะพััั ะธััะพัะฝะธะบะพะฒ: 0.68
```

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### SSH ะขัะฝะฝะตะปะธ
- โ Reverse SSH tunnel ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะฟะตัะตะฟะพะดะบะปััะตะฝะธะตะผ
- โ SSH ะบะปััะธ ะฑะตะท passphrase ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ
- โ ServerAliveInterval ะดะปั ะฟะพะดะดะตัะถะฐะฝะธั ัะพะตะดะธะฝะตะฝะธั
- โ LaunchAgent ะดะปั ะฐะฒัะพะทะฐะฟััะบะฐ ะฟัะธ ะทะฐะณััะทะบะต Mac

### ะะทะพะปััะธั ะฟัะพัะตััะพะฒ
- โ ะะฐะถะดัะน MCP - ะพัะดะตะปัะฝัะน ะฟัะพัะตัั
- โ Appium ะธะทะพะปะธัะพะฒะฐะฝ ะฝะฐ Mac
- โ ะญะผัะปััะพั ะฒ sandbox Android
- โ Timeout ะดะปั ะฒัะตั SSH ะบะพะผะฐะฝะด

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
- โ ANDROID_HOME ะฟะตัะตะดะฐัััั ัะตัะตะท SSH
- โ PATH ะฝะฐัััะพะตะฝ ะดะปั non-interactive ัะตััะธะน
- โ ะะพะปะฝัะต ะฟััะธ ะบ node ะธ ะดััะณะธะผ ะฑะธะฝะฐัะฝะธะบะฐะผ

---

## ๐ ะกัะฐััั ะฟัะพะตะบัะฐ

**ะขะตะบััะฐั ะฒะตััะธั:** 8.0.0 (Modular Architecture + RAG Comparison)

**ะะพัะปะตะดะฝะธะต ะธะทะผะตะฝะตะฝะธั (24.12.2024):**
- โ **ะะพะดัะปัะฝะฐั ะฐััะธัะตะบัััะฐ** - ัะฐะทะฑะธั ะฝะฐ mcp_clients/, handlers/, utils/
- โ **ะะพะผะฐะฝะดะฐ /compare** - A/B ัะตััะธัะพะฒะฐะฝะธะต RAG vs ะฟััะผัะต ะพัะฒะตัั Claude
- โ **ะงะธัััะน ะบะพะด** - ~1000 ัััะพะบ ะผะพะดัะปัะฝะพะณะพ ะบะพะดะฐ ะฒะผะตััะพ ะผะพะฝะพะปะธัะฐ
- โ **ะัะฐะฒะธะปัะฝะฐั ะบะพะดะธัะพะฒะบะฐ** - ะฒัะต ัะฐะนะปั ะฒ UTF-8
- โ **ะะตะณะบะพ ัะฐััะธัััั** - ะดะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั ัะธั ัะตัะตะท ะพัะดะตะปัะฝัะต ะผะพะดัะปะธ

**ะัะตะดัะดััะธะต ะฒะตััะธะธ:**
- 7.0.0 (23.12.2024) - Ollama RAG Integration ั ะฒะตะบัะพัะฝัะผ ะฟะพะธัะบะพะผ
- 6.0.0 (21.12.2024) - MCP Mobile + Appium + Android ัะผัะปััะพั
- 5.0.0 (19.12.2024) - MCP News + ัััะตะฝะฝะธะต ะดะฐะนะดะถะตััั
- 4.0.0 (17.12.2024) - ะะพะณะพะดะฝัะต ะฟะพะดะฟะธัะบะธ + ััะฐะฒะฝะตะฝะธะต ั ะฒัะตัะฐ

**ะ ัะฐะทัะฐะฑะพัะบะต:**
- [ ] ะะฟัะธะผะธะทะฐัะธั RAG (ัััะฐะฝะพะฒะบะฐ Ollama ะฝะฐ ัะตัะฒะตั)
- [ ] ะะธะฑัะธะดะฝัะน ะฟะพะดัะพะด RAG/No-RAG ั ะฐะฒัะพะฒัะฑะพัะพะผ
- [ ] ะะฐััะธัะตะฝะธะต ะฑะฐะทั ะทะฝะฐะฝะธะน
- [ ] ะะพะดะดะตัะถะบะฐ PDF/DOCX ะดะพะบัะผะตะฝัะพะฒ

---

## ๐ง ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะัะพะฑะปะตะผะฐ: ะขัะฝะฝะตะปั ะฝะต ัะฐะฑะพัะฐะตั

**ะะตัะตะฝะธะต:**
```bash
# ะะฐ Mac ะฟัะพะฒะตัััะต LaunchAgent
launchctl list | grep ssh-reverse-tunnel

# ะัะพะฒะตัััะต ะปะพะณะธ
tail /tmp/ssh-tunnel-error.log

# ะะตัะตะทะฐะฟัััะธัะต ััะฝะฝะตะปั
launchctl unload ~/Library/LaunchAgents/com.user.ssh-reverse-tunnel.plist
launchctl load ~/Library/LaunchAgents/com.user.ssh-reverse-tunnel.plist
```

### ะัะพะฑะปะตะผะฐ: ะะพั ะฝะต ะฒะธะดะธั ััััะพะนััะฒะฐ

**ะะตัะตะฝะธะต:**
```bash
# ะะฐ Mac ะฟัะพะฒะตัััะต Appium
ps aux | grep appium

# ะัะพะฒะตัััะต ัะผัะปััะพั
adb devices

# ะัะพะฒะตัััะต ANDROID_HOME ัะตัะตะท SSH
ssh -i ~/.ssh/server_to_mac -p 2222 user@localhost "echo \$ANDROID_HOME"
```

### ะัะพะฑะปะตะผะฐ: node: command not found ัะตัะตะท SSH

**ะะตัะตะฝะธะต:**
ะัะฟะพะปัะทัะนัะต ะฟะพะปะฝัะน ะฟััั ะบ node ะฒ bot.py:
```python
MCP_MOBILE_NODE_PATH = "/Users/YOUR_USER/.nvm/versions/node/v20.19.6/bin/node"
```

---

## ๐ค ะะบะปะฐะด

ะัะพะตะบั ะพัะบััั ะดะปั ัะปัััะตะฝะธะน! ะัะปะธ ั ะฒะฐั ะตััั ะธะดะตะธ ะธะปะธ ะฝะฐัะปะธ ะฑะฐะณ:

1. ะกะพะทะดะฐะนัะต Issue
2. ะคะพัะบะฝะธัะต ัะตะฟะพะทะธัะพัะธะน
3. ะกะพะทะดะฐะนัะต ะฒะตัะบั ะดะปั ัะธัะธ
4. ะัะฟัะฐะฒััะต Pull Request

---

## ๐ ะะธัะตะฝะทะธั

MIT License

---

## ๐จโ๐ป ะะฒัะพั

**ะะธะบัะพั ะัะทัะผะธะฝ**
- GitHub: [@KuzminVik](https://github.com/KuzminVik)
- Telegram ะฑะพั: ัะพะทะดะฐะฝ ั ะฟะพะผะพััั Claude AI (Anthropic)

---

## ๐ ะะปะฐะณะพะดะฐัะฝะพััะธ

- [Anthropic](https://www.anthropic.com/) - Claude AI
- [python-telegram-bot](https://python-telegram-bot.org/) - Telegram Bot ะฑะธะฑะปะธะพัะตะบะฐ
- [Open-Meteo](https://open-meteo.com/) - Weather API
- [MCP](https://modelcontextprotocol.io/) - Model Context Protocol
- [mobile-mcp](https://github.com/mobile-next/mobile-mcp) - MCP Mobile Server
- [Appium](https://appium.io/) - ะผะพะฑะธะปัะฝะฐั ะฐะฒัะพะผะฐัะธะทะฐัะธั
- [Ollama](https://ollama.ai/) - ะปะพะบะฐะปัะฝะฐั LLM ะฟะปะฐััะพัะผะฐ

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

- [OLLAMA_RAG_INTEGRATION_SUMMARY.md](./OLLAMA_RAG_INTEGRATION_SUMMARY.md) - ะะฝัะตะณัะฐัะธั RAG ะฟะพะธัะบะฐ
- [MOBILE_INTEGRATION_SUMMARY.md](./MOBILE_INTEGRATION_SUMMARY.md) - ะะฝัะตะณัะฐัะธั Android ัะผัะปััะพัะฐ
- [NEWS_MCP_INTEGRATION_SUMMARY.md](./NEWS_MCP_INTEGRATION_SUMMARY.md) - ะะฝัะตะณัะฐัะธั ะฝะพะฒะพััะตะน
- [PROJECT_CONTEXT_UPDATED.md](./PROJECT_CONTEXT_UPDATED.md) - ะะพะปะฝัะน ะบะพะฝัะตะบัั ะฟัะพะตะบัะฐ

---

**ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต:** 24 ะดะตะบะฐะฑัั 2024  
**ะะตััะธั README:** 8.0.0
